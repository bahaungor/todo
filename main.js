(()=>{"use strict";const e=document.querySelector(".sidebar"),t=document.querySelector(".side-menu-opener"),n=document.querySelector(".main");let o=!0;function c(){u.style.display="flex"}function s(){document.querySelector(".project-form-input").value="",u.style.display="none"}t.addEventListener("click",(function(){o?(e.style.display="none",n.style.gridTemplateColumns="1fr",o=!1):(e.style.display="block",n.style.gridTemplateColumns="350px 1fr",o=!0)})),document.querySelector(".add-button").addEventListener("click",c),document.querySelector(".project-form-button.cancel").addEventListener("click",s);const r=document.querySelectorAll(".sidebar-item"),l=document.querySelector(".content-title");r.forEach((e=>e.addEventListener("click",(e=>{!function(e){r.forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".project").forEach((e=>e.classList.remove("active"))),e.target.classList.add("active")}(e),function(e){l.textContent="",l.textContent=e.target.textContent,document.querySelector(".add-task").classList.add("hidden")}(e)}))));const a=document.querySelector(".tasks");let i="";let d=!1;const u=document.querySelector(".project-form");function m(){let e=0;f.forEach((t=>{t.id=e,e++}))}function p(e){console.log(i),confirm("Are you sure you want to delete this project & tasks inside it?")&&(f.splice(i,1),localStorage.setItem("projects_by_baha",JSON.stringify(f))),m(),y()}u.addEventListener("submit",(function(e){if(e.preventDefault(),d)console.log(i),f[i].projectTitle=u.querySelector(".project-form-input").value,d=!1,localStorage.setItem("projects_by_baha",JSON.stringify(f)),y(),s();else{const e=function(e){console.log("factory called");return{projectTitle:e,id:f.length,tasks:[]}}(document.querySelector(".project-form-input").value);f.push(e),console.log(f),localStorage.setItem("projects_by_baha",JSON.stringify(f)),m(),y(),s()}})),document.querySelectorAll(".delete-button").forEach((e=>e.addEventListener("click",p)));const f=JSON.parse(localStorage.getItem("projects_by_baha"))||[];function y(){const e=document.querySelector(".projects");e.innerHTML="",f.forEach((t=>{const n=document.createElement("div");n.classList.add("project"),n.dataset.id=t.id;const o=document.createElement("div");o.classList.add("project-title"),o.textContent=t.projectTitle;const c=document.createElement("img");c.classList.add("menu-icon"),c.classList.add("edit-button"),c.setAttribute("src","../src/images/edit.png");const s=document.createElement("img");s.classList.add("menu-icon"),s.classList.add("delete-button"),s.setAttribute("src","../src/images/delete.png"),s.addEventListener("click",p),n.appendChild(o),n.appendChild(c),n.appendChild(s),e.appendChild(n)})),function(){const e=document.querySelectorAll(".project");e.forEach((t=>t.addEventListener("click",(t=>{!function(t){e.forEach((e=>e.classList.remove("active"))),r.forEach((e=>e.classList.remove("active"))),t.currentTarget.classList.add("active")}(t),document.querySelector(".add-task").classList.remove("hidden"),function(e){document.querySelector(".content-title").textContent=e.currentTarget.textContent}(t),function(e){i=e.currentTarget.dataset.id,console.log("selected project is "+i)}(t),function(){if(console.log(f),"projects[selectedProject].tasks.length is "+f[i].tasks.length==0)console.log(f[i].tasks.length),a.innerHTML="",a.textContent="Yayyyy! No Tasks!";else{a.innerHTML="";const e=f[i].tasks.map((e=>`\n            <div class="task-container" data-id="${e.id}">\n                <input type="checkbox" id="task-done">\n                <div class="task-title">${e.title}</div>\n                <div class="due-date">${e.due}</div>\n                <input type="checkbox" id="task-importance">\n                <div class="task-details">${e.detail}</div>\n                <img class="menu-icon delete-button" src="../src/images/delete.png">\n            </div>`)).join("");a.innerHTML=e,console.log(e)}}()}))))}(),function(){function e(e){c(),d=!0,u.querySelector(".project-form-input").value=e.target.parentNode.textContent}document.querySelectorAll(".edit-button").forEach((t=>t.addEventListener("click",e)))}()}const v=document.querySelector(".task-form"),g=document.querySelector(".add-task");function k(){v.classList.add("hidden"),g.classList.remove("hidden"),v.reset()}g.addEventListener("click",(function(){console.log("new task will be added to project: "+i),console.log(f[i]),v.classList.remove("hidden"),g.classList.add("hidden")})),document.querySelector(".task-form-button.cancel").addEventListener("click",k),v.addEventListener("submit",(function(e){e.preventDefault();const t=function(e,t,n){return{id:f[i].tasks.length,done:!1,title:e,detail:t,due:n,importantance:!1}}(document.querySelector(".task-form #task-title").value,document.querySelector(".task-form #task-details").value,document.querySelector(".task-form #task-due-date").value);f[i].tasks.push(t),console.log(f[i].tasks),k()})),y()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUMsTUFIQyxFQUdLZCxNQUFBQSxFQUFPRSxPQUFBQSxFQUFRRCxJQUFBQSxFQUFLYyxlQUZoQixHQVJOQyxDQUhGbkYsU0FBU0MsY0FBYywwQkFBMEJNLE1BQ2hEUCxTQUFTQyxjQUFjLDRCQUE0Qk0sTUFDdERQLFNBQVNDLGNBQWMsNkJBQTZCTSxPQUVoRXdCLEVBQVNKLEdBQWlCRCxNQUFNc0IsS0FBS2dDLEdBQ3JDOUMsUUFBUUMsSUFBSUosRUFBU0osR0FBaUJELE9BQ3RDb0QsT0N6QkpwQyxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy9zaWRlYmFyT3BlbmVyLmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvcHJvamVjdEZvcm1PcGVuZXJDbG9zZXIuanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy9ob21lQnV0dG9uc0Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly8xNS4tdG9kby1saXN0Ly4vc3JjL3Rhc2tMb2FkZXIuanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy9zaWRlYmFyUHJvamVjdExpc3RGdW5jdGlvbmFsaXR5LmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvYWRkVXBkYXRlUHJvamVjdC5qcyIsIndlYnBhY2s6Ly8xNS4tdG9kby1saXN0Ly4vc3JjL2RlbGV0ZVByb2plY3QuanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy9wcm9qZWN0TG9hZGVyLmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvc2lkZWJhclByb2plY3RFZGl0cy5qcyIsIndlYnBhY2s6Ly8xNS4tdG9kby1saXN0Ly4vc3JjL3Rhc2tDcmVhdG9yLmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lkZWJhclwiKTtcclxuY29uc3Qgc2lkZWJhck9wZW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lkZS1tZW51LW9wZW5lclwiKTtcclxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpblwiKTtcclxubGV0IHNpZGViYXJTaG93biA9IHRydWU7XHJcbnNpZGViYXJPcGVuZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZVNpZGViYXIpO1xyXG5mdW5jdGlvbiB0b2dnbGVTaWRlYmFyKCl7XHJcbiAgICBpZihzaWRlYmFyU2hvd24pe1xyXG4gICAgICAgIHNpZGViYXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIG1haW4uc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IFwiMWZyXCI7XHJcbiAgICAgICAgc2lkZWJhclNob3duID0gZmFsc2U7XHJcbiAgICB9IGVsc2V7XHJcbiAgICAgICAgc2lkZWJhci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIG1haW4uc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IFwiMzUwcHggMWZyXCI7XHJcbiAgICAgICAgc2lkZWJhclNob3duID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtzaWRlYmFyT3BlbmVyfSIsImltcG9ydCB7Zm9ybX0gZnJvbSBcIi4vYWRkVXBkYXRlUHJvamVjdFwiXHJcblxyXG5jb25zdCBhZGRQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtYnV0dG9uXCIpO1xyXG5hZGRQcm9qZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvamVjdEZvcm0pO1xyXG5mdW5jdGlvbiBvcGVuUHJvamVjdEZvcm0oKXtcclxuICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG59XHJcblxyXG5jb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtZm9ybS1idXR0b24uY2FuY2VsXCIpO1xyXG5jYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlUHJvamVjdEZvcm0pO1xyXG5mdW5jdGlvbiBjbG9zZVByb2plY3RGb3JtKCl7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtZm9ybS1pbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxufVxyXG5cclxuZXhwb3J0IHtjbG9zZVByb2plY3RGb3JtLCBvcGVuUHJvamVjdEZvcm19IiwiY29uc3QgbWVudWJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNpZGViYXItaXRlbVwiKTtcclxuY29uc3QgY29udGVudFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50LXRpdGxlXCIpO1xyXG5cclxubWVudWJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgc2VsZWN0QnV0dG9uKGUpO1xyXG4gICAgdXBkYXRlQ29udGVudFRpdGxlKGUpO1xyXG59KSk7XHJcbmZ1bmN0aW9uIHNlbGVjdEJ1dHRvbihlKXtcclxuICAgIG1lbnVidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpKTtcclxuICAgIGNvbnN0IHNpZGViYXJQcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKTtcclxuICAgIHNpZGViYXJQcm9qZWN0cy5mb3JFYWNoKHByb2plY3QgPT4gcHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpKTtcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbn1cclxuZnVuY3Rpb24gdXBkYXRlQ29udGVudFRpdGxlKGUpe1xyXG4gICAgY29udGVudFRpdGxlLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGNvbnRlbnRUaXRsZS50ZXh0Q29udGVudCA9IGUudGFyZ2V0LnRleHRDb250ZW50O1xyXG4gICAgY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2tcIik7XHJcbiAgICBhZGRUYXNrQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCB7bWVudWJ1dHRvbnN9IiwiaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tIFwiLi9wcm9qZWN0TG9hZGVyXCI7XHJcbmltcG9ydCB7IHNlbGVjdGVkUHJvamVjdCB9IGZyb20gXCIuL3NpZGViYXJQcm9qZWN0TGlzdEZ1bmN0aW9uYWxpdHlcIjtcclxuXHJcbmNvbnN0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuXHJcbmZ1bmN0aW9uIGxvYWRQcm9qZWN0c1Rhc2tzKCl7XHJcbiAgICBjb25zb2xlLmxvZyhwcm9qZWN0cyk7XHJcbiAgICBpZihcInByb2plY3RzW3NlbGVjdGVkUHJvamVjdF0udGFza3MubGVuZ3RoIGlzIFwiICsgcHJvamVjdHNbc2VsZWN0ZWRQcm9qZWN0XS50YXNrcy5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHNbc2VsZWN0ZWRQcm9qZWN0XS50YXNrcy5sZW5ndGgpO1xyXG4gICAgICAgIHRhc2tzLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGFza3MudGV4dENvbnRlbnQgPSBcIllheXl5eSEgTm8gVGFza3MhXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHByb2plY3RzW3NlbGVjdGVkUHJvamVjdF0udGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgICAgICAvLyAgICAgY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgLy8gICAgIHRhc2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRhc2stY29udGFpbmVyXCIpO1xyXG4gICAgICAgIC8vICAgICB0YXNrQ29udGFpbmVyLmRhdGFzZXQuaWQgPSB0YXNrLmlkO1xyXG4gICAgICAgIC8vICAgICBjb25zdCB0YXNrRG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAvLyAgICAgdGFza0RvbmUuaWQgPSBcInRhc2stZG9uZVwiO1xyXG4gICAgICAgIC8vICAgICB0YXNrRG9uZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XHJcblxyXG4gICAgICAgIC8vIH0pXHJcbiAgICAgICAgdGFza3MuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBjb25zdCBodG1sID0gcHJvamVjdHNbc2VsZWN0ZWRQcm9qZWN0XS50YXNrcy5tYXAodGFzayA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLWNvbnRhaW5lclwiIGRhdGEtaWQ9XCIke3Rhc2suaWR9XCI+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJ0YXNrLWRvbmVcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLXRpdGxlXCI+JHt0YXNrLnRpdGxlfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImR1ZS1kYXRlXCI+JHt0YXNrLmR1ZX08L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cInRhc2staW1wb3J0YW5jZVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stZGV0YWlsc1wiPiR7dGFzay5kZXRhaWx9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwibWVudS1pY29uIGRlbGV0ZS1idXR0b25cIiBzcmM9XCIuLi9zcmMvaW1hZ2VzL2RlbGV0ZS5wbmdcIj5cclxuICAgICAgICAgICAgPC9kaXY+YFxyXG4gICAgICAgIH0pLmpvaW4oXCJcIik7XHJcbiAgICAgICAgdGFza3MuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgICBjb25zb2xlLmxvZyhodG1sKTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQge2xvYWRQcm9qZWN0c1Rhc2tzfSIsImltcG9ydCB7IG1lbnVidXR0b25zIH0gZnJvbSBcIi4vaG9tZUJ1dHRvbnNGdW5jdGlvbnNcIjtcclxuaW1wb3J0IHsgbG9hZFByb2plY3RzVGFza3MgfSBmcm9tIFwiLi90YXNrTG9hZGVyXCI7XHJcblxyXG5sZXQgc2VsZWN0ZWRQcm9qZWN0ID0gXCJcIjtcclxuZnVuY3Rpb24gc2lkZWJhclByb2plY3RGdW5jdGlvbmFsaXR5KCl7XHJcbiAgICBjb25zdCBzaWRlYmFyUHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3RcIik7XHJcbiAgICBzaWRlYmFyUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgaGlnaGxpZ2h0UHJvamVjdChlKTtcclxuICAgICAgICBkaXNwbGF5UHJvamVjdFRhc2tzKGUpO1xyXG4gICAgICAgIHVwZGF0ZUNvbnRlbnRUaXRsZShlKTtcclxuICAgICAgICB1cGRhdGVTZWxlY3RlZFByb2plY3QoZSk7XHJcbiAgICAgICAgbG9hZFByb2plY3RzVGFza3MoKTtcclxuICAgIH0pKTtcclxuICAgIGZ1bmN0aW9uIGhpZ2hsaWdodFByb2plY3QoZSl7XHJcbiAgICAgICAgc2lkZWJhclByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiBwcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIikpO1xyXG4gICAgICAgIG1lbnVidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpKTtcclxuICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0VGFza3MoZSl7XHJcbiAgICAgICAgY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2tcIik7XHJcbiAgICAgICAgYWRkVGFza0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlQ29udGVudFRpdGxlKGUpe1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudC10aXRsZVwiKS50ZXh0Q29udGVudCA9IGUuY3VycmVudFRhcmdldC50ZXh0Q29udGVudDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkUHJvamVjdChlKXtcclxuICAgICAgICBzZWxlY3RlZFByb2plY3QgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pZDtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNlbGVjdGVkIHByb2plY3QgaXMgXCIgKyBzZWxlY3RlZFByb2plY3QpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7c2lkZWJhclByb2plY3RGdW5jdGlvbmFsaXR5LCBzZWxlY3RlZFByb2plY3R9IiwiaW1wb3J0IHtwcm9qZWN0c30gZnJvbSBcIi4vcHJvamVjdExvYWRlclwiXHJcbmltcG9ydCB7bG9hZFByb2plY3RzfSBmcm9tIFwiLi9wcm9qZWN0TG9hZGVyXCJcclxuaW1wb3J0IHtjbG9zZVByb2plY3RGb3JtfSBmcm9tIFwiLi9wcm9qZWN0Rm9ybU9wZW5lckNsb3NlclwiXHJcbmltcG9ydCB7c2VsZWN0ZWRQcm9qZWN0fSBmcm9tIFwiLi9zaWRlYmFyUHJvamVjdExpc3RGdW5jdGlvbmFsaXR5XCJcclxuXHJcbmxldCBmb3JtRWRpdCA9IGZhbHNlO1xyXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm1cIik7XHJcbmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBhZGRVcGRhdGVQcm9qZWN0KTtcclxuZnVuY3Rpb24gYWRkVXBkYXRlUHJvamVjdChlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmKGZvcm1FZGl0KXtcclxuICAgICAgICBjb25zb2xlLmxvZyhzZWxlY3RlZFByb2plY3QpXHJcbiAgICAgICAgcHJvamVjdHNbc2VsZWN0ZWRQcm9qZWN0XS5wcm9qZWN0VGl0bGUgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtLWlucHV0XCIpLnZhbHVlO1xyXG4gICAgICAgIGZvcm1FZGl0ID0gZmFsc2U7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c19ieV9iYWhhXCIs4oCvSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcclxuICAgICAgICBsb2FkUHJvamVjdHMoKTtcclxuICAgICAgICBjbG9zZVByb2plY3RGb3JtKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtLWlucHV0XCIpLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBwcm9qZWN0Q3JlYXRvcihwcm9qZWN0VGl0bGUpO1xyXG4gICAgICAgIHByb2plY3RzLnB1c2gobmV3UHJvamVjdCk7XHJcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHMpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNfYnlfYmFoYVwiLOKAr0pTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XHJcbiAgICAgICAgdXBkYXRlSURzKCk7XHJcbiAgICAgICAgbG9hZFByb2plY3RzKCk7XHJcbiAgICAgICAgY2xvc2VQcm9qZWN0Rm9ybSgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gcHJvamVjdENyZWF0b3IocHJvamVjdFRpdGxlKXtcclxuICAgIGNvbnNvbGUubG9nKFwiZmFjdG9yeSBjYWxsZWRcIilcclxuICAgIGNvbnN0IGlkID0gcHJvamVjdHMubGVuZ3RoO1xyXG4gICAgY29uc3QgdGFza3MgPSBbXTtcclxuICAgIHJldHVybiB7cHJvamVjdFRpdGxlLCBpZCwgdGFza3N9O1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVJRHMoKXtcclxuICAgIGxldCBpID0gMDtcclxuICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XHJcbiAgICAgICAgcHJvamVjdC5pZCA9IGk7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IHtmb3JtLCBmb3JtRWRpdCwgc2VsZWN0ZWRQcm9qZWN0LCB1cGRhdGVJRHN9IiwiaW1wb3J0IHsgdXBkYXRlSURzIH0gZnJvbSBcIi4vYWRkVXBkYXRlUHJvamVjdFwiO1xyXG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RMb2FkZXJcIjtcclxuaW1wb3J0IHsgbG9hZFByb2plY3RzIH0gZnJvbSBcIi4vcHJvamVjdExvYWRlclwiO1xyXG5pbXBvcnQgeyBzZWxlY3RlZFByb2plY3QgfSBmcm9tIFwiLi9zaWRlYmFyUHJvamVjdExpc3RGdW5jdGlvbmFsaXR5XCI7XHJcblxyXG5cclxuY29uc3QgZGVsZXRlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGVsZXRlLWJ1dHRvblwiKTtcclxuZGVsZXRlQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlbGV0ZVRoYXRQcm9qZWN0KSk7XHJcbmZ1bmN0aW9uIGRlbGV0ZVRoYXRQcm9qZWN0KGUpe1xyXG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRQcm9qZWN0KTtcclxuICAgIGNvbnN0IGRlY2lzaW9uID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBwcm9qZWN0ICYgdGFza3MgaW5zaWRlIGl0P1wiKTtcclxuICAgIGlmKGRlY2lzaW9uKXtcclxuICAgICAgICBwcm9qZWN0cy5zcGxpY2Uoc2VsZWN0ZWRQcm9qZWN0LCAxKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzX2J5X2JhaGFcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUlEcygpO1xyXG4gICAgbG9hZFByb2plY3RzKCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGRlbGV0ZVRoYXRQcm9qZWN0IH1cclxuIiwiaW1wb3J0IHsgZGVsZXRlVGhhdFByb2plY3QgfSBmcm9tIFwiLi9kZWxldGVQcm9qZWN0XCI7XHJcbmltcG9ydCB7IHNpZGViYXJQcm9qZWN0RnVuY3Rpb25hbGl0eSB9IGZyb20gXCIuL3NpZGViYXJQcm9qZWN0TGlzdEZ1bmN0aW9uYWxpdHlcIjtcclxuaW1wb3J0IHsgc2lkZWJhclByb2plY3RzRWRpdCB9IGZyb20gXCIuL3NpZGViYXJQcm9qZWN0RWRpdHNcIjtcclxuXHJcbmNvbnN0IHByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RzX2J5X2JhaGFcIikpIHx8IFtdO1xyXG5cclxuZnVuY3Rpb24gbG9hZFByb2plY3RzKCl7XHJcbiAgICBjb25zdCBzaWRlYmFyUHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIik7XHJcbiAgICBzaWRlYmFyUHJvamVjdENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgcHJvamVjdHMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwcm9qZWN0LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpO1xyXG4gICAgICAgIHByb2plY3QuZGF0YXNldC5pZCA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwcm9qZWN0VGl0bGUuY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGl0bGVcIik7XHJcbiAgICAgICAgcHJvamVjdFRpdGxlLnRleHRDb250ZW50ID0gaXRlbS5wcm9qZWN0VGl0bGU7XHJcbiAgICAgICAgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgZWRpdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWVudS1pY29uXCIpO1xyXG4gICAgICAgIGVkaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcImVkaXQtYnV0dG9uXCIpO1xyXG4gICAgICAgIGVkaXRCdXR0b24uc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi4vc3JjL2ltYWdlcy9lZGl0LnBuZ1wiKTtcclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWVudS1pY29uXCIpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgICAgICBkZWxldGVCdXR0b24uc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi4vc3JjL2ltYWdlcy9kZWxldGUucG5nXCIpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlVGhhdFByb2plY3QpO1xyXG4gICAgICAgIHByb2plY3QuYXBwZW5kQ2hpbGQocHJvamVjdFRpdGxlKTtcclxuICAgICAgICBwcm9qZWN0LmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xyXG4gICAgICAgIHByb2plY3QuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKTtcclxuICAgICAgICBzaWRlYmFyUHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0KTtcclxuICAgIH0pXHJcbiAgICBzaWRlYmFyUHJvamVjdEZ1bmN0aW9uYWxpdHkoKTtcclxuICAgIHNpZGViYXJQcm9qZWN0c0VkaXQoKTtcclxufVxyXG5cclxuZXhwb3J0IHtsb2FkUHJvamVjdHMsIHByb2plY3RzfSIsImltcG9ydCB7Zm9ybUVkaXR9IGZyb20gXCIuL2FkZFVwZGF0ZVByb2plY3RcIlxyXG5pbXBvcnQgeyBvcGVuUHJvamVjdEZvcm0gfSBmcm9tIFwiLi9wcm9qZWN0Rm9ybU9wZW5lckNsb3NlclwiO1xyXG5pbXBvcnQge2Zvcm19IGZyb20gXCIuL2FkZFVwZGF0ZVByb2plY3RcIlxyXG5cclxubGV0IHNlbGVjdGVkUHJvamVjdCA9IFwiXCI7XHJcbmZ1bmN0aW9uIHNpZGViYXJQcm9qZWN0c0VkaXQoKXtcclxuICAgIGNvbnN0IGVkaXRCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWJ1dHRvblwiKTtcclxuICAgIGVkaXRCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdmlld1Byb2plY3RFZGl0Rm9ybSkpO1xyXG4gICAgZnVuY3Rpb24gdmlld1Byb2plY3RFZGl0Rm9ybShlKXtcclxuICAgICAgICBvcGVuUHJvamVjdEZvcm0oKTtcclxuICAgICAgICBmb3JtRWRpdCA9IHRydWU7XHJcbiAgICAgICAgZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtZm9ybS1pbnB1dFwiKS52YWx1ZSA9IGUudGFyZ2V0LnBhcmVudE5vZGUudGV4dENvbnRlbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7c2lkZWJhclByb2plY3RzRWRpdH0iLCJpbXBvcnQgeyBzZWxlY3RlZFByb2plY3QgfSBmcm9tIFwiLi9zaWRlYmFyUHJvamVjdExpc3RGdW5jdGlvbmFsaXR5XCI7XHJcbmltcG9ydCB7cHJvamVjdHN9IGZyb20gXCIuL3Byb2plY3RMb2FkZXJcIlxyXG5cclxuY29uc3QgdGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stZm9ybVwiKTtcclxuY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2tcIik7XHJcblxyXG5hZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuVGFza0Zvcm0pXHJcbmZ1bmN0aW9uIG9wZW5UYXNrRm9ybSgpe1xyXG4gICAgY29uc29sZS5sb2coXCJuZXcgdGFzayB3aWxsIGJlIGFkZGVkIHRvIHByb2plY3Q6IFwiICsgc2VsZWN0ZWRQcm9qZWN0KTtcclxuICAgIGNvbnNvbGUubG9nKHByb2plY3RzW3NlbGVjdGVkUHJvamVjdF0pO1xyXG4gICAgdGFza0Zvcm0uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICAgIGFkZFRhc2tCdXR0b24uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxufVxyXG5cclxuY29uc3QgdGFza0Zvcm1DYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stZm9ybS1idXR0b24uY2FuY2VsXCIpO1xyXG50YXNrRm9ybUNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VUYXNrRm9ybSk7XHJcbmZ1bmN0aW9uIGNsb3NlVGFza0Zvcm0oKXtcclxuICAgIHRhc2tGb3JtLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICBhZGRUYXNrQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICB0YXNrRm9ybS5yZXNldCgpO1xyXG59XHJcblxyXG50YXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGNyZWF0ZVRhc2spO1xyXG5mdW5jdGlvbiBjcmVhdGVUYXNrKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stZm9ybSAjdGFzay10aXRsZVwiKS52YWx1ZTtcclxuICAgIGNvbnN0IGRldGFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1mb3JtICN0YXNrLWRldGFpbHNcIikudmFsdWU7XHJcbiAgICBjb25zdCBkdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stZm9ybSAjdGFzay1kdWUtZGF0ZVwiKS52YWx1ZTtcclxuICAgIGNvbnN0IG5ld1Rhc2sgPSB0YXNrQ29uc3RydWN0b3IodGl0bGUsIGRldGFpbCwgZHVlKTtcclxuICAgIHByb2plY3RzW3NlbGVjdGVkUHJvamVjdF0udGFza3MucHVzaChuZXdUYXNrKTtcclxuICAgIGNvbnNvbGUubG9nKHByb2plY3RzW3NlbGVjdGVkUHJvamVjdF0udGFza3MpXHJcbiAgICBjbG9zZVRhc2tGb3JtKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRhc2tDb25zdHJ1Y3Rvcih0aXRsZSwgZGV0YWlsLCBkdWUpe1xyXG4gICAgY29uc3QgZG9uZSA9IGZhbHNlO1xyXG4gICAgY29uc3QgaW1wb3J0YW50YW5jZSA9IGZhbHNlO1xyXG4gICAgY29uc3QgaWQgPSBwcm9qZWN0c1tzZWxlY3RlZFByb2plY3RdLnRhc2tzLmxlbmd0aDtcclxuICAgIHJldHVybiB7aWQsIGRvbmUsIHRpdGxlLCBkZXRhaWwsIGR1ZSwgaW1wb3J0YW50YW5jZX1cclxufVxyXG5cclxuZXhwb3J0IHthZGRUYXNrQnV0dG9ufSIsImltcG9ydCB7IHNpZGViYXJPcGVuZXIgfSBmcm9tIFwiLi9zaWRlYmFyT3BlbmVyXCI7XG5pbXBvcnQgeyBsb2FkUHJvamVjdHMgfSBmcm9tIFwiLi9wcm9qZWN0TG9hZGVyXCI7XG5pbXBvcnQge2Zvcm1FZGl0LCBzZWxlY3RlZFByb2plY3R9IGZyb20gXCIuL2FkZFVwZGF0ZVByb2plY3RcIlxuaW1wb3J0IHthZGRUYXNrQnV0dG9ufSBmcm9tIFwiLi90YXNrQ3JlYXRvclwiXG5pbXBvcnQge2xvYWRQcm9qZWN0c1Rhc2tzfSBmcm9tIFwiLi90YXNrTG9hZGVyXCJcblxubG9hZFByb2plY3RzKCk7XG5cbi8vIGV4cG9ydCB7Zm9ybUVkaXQsIHNlbGVjdGVkUHJvamVjdH0iXSwibmFtZXMiOlsic2lkZWJhciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNpZGViYXJPcGVuZXIiLCJtYWluIiwic2lkZWJhclNob3duIiwib3BlblByb2plY3RGb3JtIiwiY2xvc2VQcm9qZWN0Rm9ybSIsInZhbHVlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0eWxlIiwiZGlzcGxheSIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJtZW51YnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb250ZW50VGl0bGUiLCJmb3JFYWNoIiwiYnV0dG9uIiwiZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInByb2plY3QiLCJ0YXJnZXQiLCJhZGQiLCJzZWxlY3RCdXR0b24iLCJ0ZXh0Q29udGVudCIsInVwZGF0ZUNvbnRlbnRUaXRsZSIsInRhc2tzIiwic2VsZWN0ZWRQcm9qZWN0IiwiZm9ybUVkaXQiLCJ1cGRhdGVJRHMiLCJpIiwicHJvamVjdHMiLCJpZCIsImRlbGV0ZVRoYXRQcm9qZWN0IiwiY29uc29sZSIsImxvZyIsImNvbmZpcm0iLCJzcGxpY2UiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvYWRQcm9qZWN0cyIsInByZXZlbnREZWZhdWx0IiwicHJvamVjdFRpdGxlIiwibmV3UHJvamVjdCIsImxlbmd0aCIsInByb2plY3RDcmVhdG9yIiwicHVzaCIsInBhcnNlIiwiZ2V0SXRlbSIsInNpZGViYXJQcm9qZWN0Q29udGFpbmVyIiwiaW5uZXJIVE1MIiwiaXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJkYXRhc2V0IiwiZWRpdEJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsImRlbGV0ZUJ1dHRvbiIsImFwcGVuZENoaWxkIiwic2lkZWJhclByb2plY3RzIiwiY3VycmVudFRhcmdldCIsImhpZ2hsaWdodFByb2plY3QiLCJ1cGRhdGVTZWxlY3RlZFByb2plY3QiLCJodG1sIiwibWFwIiwidGFzayIsInRpdGxlIiwiZHVlIiwiZGV0YWlsIiwiam9pbiIsImxvYWRQcm9qZWN0c1Rhc2tzIiwic2lkZWJhclByb2plY3RGdW5jdGlvbmFsaXR5Iiwidmlld1Byb2plY3RFZGl0Rm9ybSIsInBhcmVudE5vZGUiLCJzaWRlYmFyUHJvamVjdHNFZGl0IiwidGFza0Zvcm0iLCJhZGRUYXNrQnV0dG9uIiwiY2xvc2VUYXNrRm9ybSIsInJlc2V0IiwibmV3VGFzayIsImRvbmUiLCJpbXBvcnRhbnRhbmNlIiwidGFza0NvbnN0cnVjdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==