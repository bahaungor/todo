(()=>{"use strict";const e=document.querySelector(".sidebar"),t=document.querySelector(".side-menu-opener"),n=document.querySelector(".main");let c=!0;function o(){j.style.display="flex"}function a(){document.querySelector(".project-form-input").value="",j.style.display="none"}function s(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function r(e){s(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function i(){document.querySelectorAll(".task-container #task-done").forEach((e=>e.addEventListener("change",l))),document.querySelectorAll(".task-container #task-importance").forEach((e=>e.addEventListener("change",d)))}function d(){this.checked?(L[this.parentNode.dataset.project].tasks[this.parentNode.dataset.id].importance=!0,localStorage.setItem("projects_by_baha",JSON.stringify(L))):(L[this.parentNode.dataset.project].tasks[this.parentNode.dataset.id].importance=!1,localStorage.setItem("projects_by_baha",JSON.stringify(L)))}function l(){this.checked?(L[this.parentNode.dataset.project].tasks[this.parentNode.dataset.id].done=!0,localStorage.setItem("projects_by_baha",JSON.stringify(L))):(L[this.parentNode.dataset.project].tasks[this.parentNode.dataset.id].done=!1,localStorage.setItem("projects_by_baha",JSON.stringify(L)))}t.addEventListener("click",(function(){c?(e.style.display="none",n.style.gridTemplateColumns="1fr",c=!1):(e.style.display="block",n.style.gridTemplateColumns="350px 1fr",c=!0)})),document.querySelector(".add-button").addEventListener("click",o),document.querySelector(".project-form-button.cancel").addEventListener("click",a);const u=document.querySelector(".tasks");function p(){if(0==L[g].tasks.length||""==g)u.innerHTML="",u.textContent="Yayyyy! No Tasks!";else{const e=L[g].tasks.map((e=>`\n            <div class="task-container" data-id="${e.id}" data-project="${e.projectID}">\n                <input type="checkbox" id="task-done" ${e.done?"checked":""}>\n                <div class="task-title">${e.title}</div>\n                <div class="due-date">${e.due}</div>\n                <input type="checkbox" id="task-importance" ${e.importance?"checked":""}>\n                <div class="task-details">${e.detail}</div>\n                <img class="menu-icon delete-button" src="../src/images/delete.png">\n            </div>`)).join("");u.innerHTML="",u.innerHTML=e,i(),m()}}function m(){document.querySelectorAll(".task-container .delete-button").forEach((e=>e.addEventListener("click",k))),console.log(L)}function k(){if(confirm('Are you sure you want to delete "'+L[this.parentNode.dataset.project].tasks[this.parentNode.dataset.id].title+'" task from "'+L[this.parentNode.dataset.project].projectTitle+'" ?')){L[this.parentNode.dataset.project].tasks.splice(this.parentNode.dataset.id,1);let e=0;L[this.parentNode.dataset.project].tasks.forEach((t=>{t.id=e,e++})),localStorage.setItem("projects_by_baha",JSON.stringify(L)),""==g?(document.querySelectorAll(".project").forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".sidebar-item").forEach((e=>e.classList.remove("active"))),document.querySelector(".sidebar-item.all-tasks").classList.add("active"),document.querySelector(".content-title").textContent="All Tasks",document.querySelector(".add-task").classList.add("hidden"),v()):p()}}const y=document.querySelectorAll(".sidebar-item"),f=document.querySelector(".content-title");function v(){g="",console.log("selected project is "+g);const e=L.map((e=>e.tasks.map((e=>`\n            <div class="task-container" data-id="${e.id}" data-project="${e.projectID}">\n                <input type="checkbox" id="task-done" ${e.done?"checked":""}>\n                <div class="task-title">${e.title}</div>\n                <div class="due-date">${e.due}</div>\n                <input type="checkbox" id="task-importance" ${e.importance?"checked":""}>\n                <div class="task-details">${e.detail}</div>\n                <img class="menu-icon delete-button" src="../src/images/delete.png">\n            </div>`)).join(""))).join("");document.querySelector(".tasks").innerHTML="",document.querySelector(".tasks").innerHTML=e,i(),m()}function h(){const e=L.map((e=>e.tasks.map((e=>{if(0==function(e,t){s(2,arguments);var n=r(e),c=r(t),o=n.getTime()-c.getTime();return o<0?-1:o>0?1:o}(Date.parse(e.due),Date.parse((new Date).toISOString().split("T")[0])))return`\n                <div class="task-container" data-id="${e.id}" data-project="${e.projectID}">\n                    <input type="checkbox" id="task-done" ${e.done?"checked":""}>\n                    <div class="task-title">${e.title}</div>\n                    <div class="due-date">${e.due}</div>\n                    <input type="checkbox" id="task-importance" ${e.importance?"checked":""}>\n                    <div class="task-details">${e.detail}</div>\n                    <img class="menu-icon delete-button" src="../src/images/delete.png">\n                </div>`})).join(""))).join("");document.querySelector(".tasks").innerHTML="",document.querySelector(".tasks").innerHTML=e}y.forEach((e=>e.addEventListener("click",(e=>{!function(e){y.forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".project").forEach((e=>e.classList.remove("active"))),e.target.classList.add("active")}(e),function(e){f.textContent=e.target.textContent,document.querySelector(".add-task").classList.add("hidden")}(e)})))),document.querySelector(".sidebar-item.all-tasks").addEventListener("click",v),document.querySelector(".sidebar-item.today").addEventListener("click",h),document.querySelector(".sidebar-item.important").addEventListener("click",(function(){const e=L.map((e=>e.tasks.map((e=>{if(1==e.importance)return`\n                <div class="task-container" data-id="${e.id}" data-project="${e.projectID}">\n                    <input type="checkbox" id="task-done" ${e.done?"checked":""}>\n                    <div class="task-title">${e.title}</div>\n                    <div class="due-date">${e.due}</div>\n                    <input type="checkbox" id="task-importance" ${e.importance?"checked":""}>\n                    <div class="task-details">${e.detail}</div>\n                    <img class="menu-icon delete-button" src="../src/images/delete.png">\n                </div>`})).join(""))).join("");document.querySelector(".tasks").innerHTML="",document.querySelector(".tasks").innerHTML=e}));let g="";let S=!1;const j=document.querySelector(".project-form");function b(){let e=0;L.forEach((t=>{t.id=e,e++}))}function q(e){confirm("Are you sure you want to delete "+L[e.currentTarget.parentNode.dataset.id].projectTitle+" & tasks inside it?")&&(L.splice(e.currentTarget.parentNode.dataset.id,1),localStorage.setItem("projects_by_baha",JSON.stringify(L)),b(),E(),g="",h())}j.addEventListener("submit",(function(e){if(e.preventDefault(),S)L[g].projectTitle=j.querySelector(".project-form-input").value,S=!1,localStorage.setItem("projects_by_baha",JSON.stringify(L)),E(),a();else{const e=function(e){console.log("factory called");return{projectTitle:e,id:L.length,tasks:[]}}(document.querySelector(".project-form-input").value);L.push(e),localStorage.setItem("projects_by_baha",JSON.stringify(L)),E(),a(),document.querySelector(".tasks").innerHTML=""}})),document.querySelectorAll(".delete-button").forEach((e=>e.addEventListener("click",q)));const L=JSON.parse(localStorage.getItem("projects_by_baha"))||[];function E(){const e=L.map((e=>`\n        <div class="project" data-id=${e.id}>\n            <div class="project-title">${e.projectTitle}</div>\n            <img class="menu-icon edit-button" src="../src/images/edit.png" alt="edit">\n            <img class="menu-icon delete-button" src="../src/images/delete.png" alt="delete">\n        </div>\n        `)).join("");document.querySelector(".projects").innerHTML="",document.querySelector(".projects").innerHTML=e,document.querySelectorAll(".project .delete-button").forEach((e=>e.addEventListener("click",q))),b(),document.querySelectorAll(".project").forEach((e=>e.addEventListener("click",(e=>{!function(e){document.querySelectorAll(".project").forEach((e=>e.classList.remove("active"))),y.forEach((e=>e.classList.remove("active"))),e.currentTarget.classList.add("active")}(e),document.querySelector(".add-task").classList.remove("hidden"),function(e){document.querySelector(".content-title").textContent=e.currentTarget.textContent}(e),function(e){g=e.currentTarget.dataset.id,console.log("selected project is "+g)}(e),p()})))),function(){function e(e){o(),S=!0,j.querySelector(".project-form-input").value=e.target.parentNode.textContent}document.querySelectorAll(".edit-button").forEach((t=>t.addEventListener("click",e)))}()}const N=document.querySelector(".task-form"),T=document.querySelector(".add-task");function $(){N.classList.add("hidden"),T.classList.remove("hidden"),N.reset()}T.addEventListener("click",(function(){console.log("new task will be added to project: "+g),console.log(L[g]),N.classList.remove("hidden"),T.classList.add("hidden")})),document.querySelector(".task-form-button.cancel").addEventListener("click",$),N.addEventListener("submit",(function(e){e.preventDefault();const t=function(e,t,n){return{id:L[g].tasks.length,done:!1,title:e,detail:t,due:n,importance:!1,projectID:L[g].id}}(document.querySelector(".task-form #task-title").value,document.querySelector(".task-form #task-details").value,document.querySelector(".task-form #task-due-date").value);L[g].tasks.push(t),console.log(L[g].tasks),$(),localStorage.setItem("projects_by_baha",JSON.stringify(L)),p()})),E(),v()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnlELEdBQ2hCQSxFQUFFUyxpQkFDRixNQUdNYyxFQVFWLFNBQXlCcEQsRUFBT0UsRUFBUUQsR0FLcEMsTUFBTyxDQUFFbkIsR0FGRUwsRUFBU2dCLEdBQWlCWixNQUFNOUIsT0FFOUJxQyxNQUpBLEVBSU1ZLE1BQUFBLEVBQU9FLE9BQUFBLEVBQVFELElBQUFBLEVBQUtsQixZQUhwQixFQUdnQ2dCLFVBRGpDdEIsRUFBU2dCLEdBQWlCWCxJQVo1QnVFLENBSEZqSCxTQUFTQyxjQUFjLDBCQUEwQk0sTUFDaERQLFNBQVNDLGNBQWMsNEJBQTRCTSxNQUN0RFAsU0FBU0MsY0FBYyw2QkFBNkJNLE9BRWhFOEIsRUFBU2dCLEdBQWlCWixNQUFNNEQsS0FBS1csR0FDckN6RixRQUFRNEMsSUFBSTlCLEVBQVNnQixHQUFpQlosT0FDdENxRSxJQUNBbEUsYUFBYUMsUUFBUSxtQkFBb0JDLEtBQUtDLFVBQVVWLElBQ3hEZSxPQzFCSjZDLElBQ0FyQixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy9zaWRlYmFyT3BlbmVyLmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvcHJvamVjdEZvcm1PcGVuZXJDbG9zZXIuanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvdGFza1VwZGF0ZXIuanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy90YXNrTG9hZGVyLmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvdGFza0RlbGV0ZXIuanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy9ob21lQnV0dG9uc0Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly8xNS4tdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9jb21wYXJlQXNjL2luZGV4LmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvc2lkZWJhclByb2plY3RMaXN0RnVuY3Rpb25hbGl0eS5qcyIsIndlYnBhY2s6Ly8xNS4tdG9kby1saXN0Ly4vc3JjL2FkZFVwZGF0ZVByb2plY3QuanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy9kZWxldGVQcm9qZWN0LmpzIiwid2VicGFjazovLzE1Li10b2RvLWxpc3QvLi9zcmMvcHJvamVjdExvYWRlci5qcyIsIndlYnBhY2s6Ly8xNS4tdG9kby1saXN0Ly4vc3JjL3NpZGViYXJQcm9qZWN0RWRpdHMuanMiLCJ3ZWJwYWNrOi8vMTUuLXRvZG8tbGlzdC8uL3NyYy90YXNrQ3JlYXRvci5qcyIsIndlYnBhY2s6Ly8xNS4tdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJcIik7XHJcbmNvbnN0IHNpZGViYXJPcGVuZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGUtbWVudS1vcGVuZXJcIik7XHJcbmNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5cIik7XHJcbmxldCBzaWRlYmFyU2hvd24gPSB0cnVlO1xyXG5zaWRlYmFyT3BlbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVTaWRlYmFyKTtcclxuZnVuY3Rpb24gdG9nZ2xlU2lkZWJhcigpe1xyXG4gICAgaWYoc2lkZWJhclNob3duKXtcclxuICAgICAgICBzaWRlYmFyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBtYWluLnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSBcIjFmclwiO1xyXG4gICAgICAgIHNpZGViYXJTaG93biA9IGZhbHNlO1xyXG4gICAgfSBlbHNle1xyXG4gICAgICAgIHNpZGViYXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICBtYWluLnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSBcIjM1MHB4IDFmclwiO1xyXG4gICAgICAgIHNpZGViYXJTaG93biA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7c2lkZWJhck9wZW5lcn0iLCJpbXBvcnQge2Zvcm19IGZyb20gXCIuL2FkZFVwZGF0ZVByb2plY3RcIlxyXG5cclxuY29uc3QgYWRkUHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLWJ1dHRvblwiKTtcclxuYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblByb2plY3RGb3JtKTtcclxuZnVuY3Rpb24gb3BlblByb2plY3RGb3JtKCl7XHJcbiAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxufVxyXG5cclxuY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm0tYnV0dG9uLmNhbmNlbFwiKTtcclxuY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVByb2plY3RGb3JtKTtcclxuZnVuY3Rpb24gY2xvc2VQcm9qZWN0Rm9ybSgpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm0taW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbn1cclxuXHJcbmV4cG9ydCB7Y2xvc2VQcm9qZWN0Rm9ybSwgb3BlblByb2plY3RGb3JtfSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpOyAvLyBDbG9uZSB0aGUgZGF0ZVxuXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGFyZ3VtZW50ID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdC5pby9manVsZVwiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCB7IHByb2plY3RzIH0gZnJvbSAnLi9wcm9qZWN0TG9hZGVyJ1xyXG5pbXBvcnQgeyBzZWxlY3RlZFByb2plY3QgfSBmcm9tICcuL3NpZGViYXJQcm9qZWN0TGlzdEZ1bmN0aW9uYWxpdHknXHJcblxyXG5mdW5jdGlvbiBhZGRGdW5jdGlvbmFsaXR5VG9UYXNrcygpIHtcclxuICAgIGRvY3VtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWNvbnRhaW5lciAjdGFzay1kb25lJylcclxuICAgICAgICAuZm9yRWFjaCgoYSkgPT4gYS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjb21wbGV0ZVRhc2spKVxyXG5cclxuICAgIGRvY3VtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWNvbnRhaW5lciAjdGFzay1pbXBvcnRhbmNlJylcclxuICAgICAgICAuZm9yRWFjaCgoYSkgPT4gYS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmYXZvcml0ZVRhc2spKVxyXG59XHJcblxyXG5mdW5jdGlvbiBmYXZvcml0ZVRhc2soKSB7XHJcbiAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgcHJvamVjdHNbdGhpcy5wYXJlbnROb2RlLmRhdGFzZXQucHJvamVjdF0udGFza3NbXHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5kYXRhc2V0LmlkXHJcbiAgICAgICAgXS5pbXBvcnRhbmNlID0gdHJ1ZVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0c19ieV9iYWhhJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwcm9qZWN0c1t0aGlzLnBhcmVudE5vZGUuZGF0YXNldC5wcm9qZWN0XS50YXNrc1tcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmRhdGFzZXQuaWRcclxuICAgICAgICBdLmltcG9ydGFuY2UgPSBmYWxzZVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0c19ieV9iYWhhJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjb21wbGV0ZVRhc2soKSB7XHJcbiAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgcHJvamVjdHNbdGhpcy5wYXJlbnROb2RlLmRhdGFzZXQucHJvamVjdF0udGFza3NbXHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5kYXRhc2V0LmlkXHJcbiAgICAgICAgXS5kb25lID0gdHJ1ZVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0c19ieV9iYWhhJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwcm9qZWN0c1t0aGlzLnBhcmVudE5vZGUuZGF0YXNldC5wcm9qZWN0XS50YXNrc1tcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmRhdGFzZXQuaWRcclxuICAgICAgICBdLmRvbmUgPSBmYWxzZVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0c19ieV9iYWhhJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBhZGRGdW5jdGlvbmFsaXR5VG9UYXNrcyB9XHJcbiIsImltcG9ydCB7IHByb2plY3RzIH0gZnJvbSAnLi9wcm9qZWN0TG9hZGVyJ1xyXG5pbXBvcnQgeyBzZWxlY3RlZFByb2plY3QgfSBmcm9tICcuL3NpZGViYXJQcm9qZWN0TGlzdEZ1bmN0aW9uYWxpdHknXHJcbmltcG9ydCB7IGFkZERlbGV0ZUZ1bmN0aW9uYWxpdHlUb1Zpc2libGVUYXNrcyB9IGZyb20gJy4vdGFza0RlbGV0ZXInXHJcbmltcG9ydCB7IGFkZEZ1bmN0aW9uYWxpdHlUb1Rhc2tzIH0gZnJvbSAnLi90YXNrVXBkYXRlcidcclxuXHJcbmNvbnN0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJylcclxuXHJcbmZ1bmN0aW9uIGxvYWRQcm9qZWN0c1Rhc2tzKCkge1xyXG4gICAgaWYgKHByb2plY3RzW3NlbGVjdGVkUHJvamVjdF0udGFza3MubGVuZ3RoID09IDAgfHwgc2VsZWN0ZWRQcm9qZWN0ID09ICcnKSB7XHJcbiAgICAgICAgdGFza3MuaW5uZXJIVE1MID0gJydcclxuICAgICAgICB0YXNrcy50ZXh0Q29udGVudCA9ICdZYXl5eXkhIE5vIFRhc2tzISdcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgaHRtbCA9IHByb2plY3RzW3NlbGVjdGVkUHJvamVjdF0udGFza3NcclxuICAgICAgICAgICAgLm1hcCgodGFzaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stY29udGFpbmVyXCIgZGF0YS1pZD1cIiR7dGFzay5pZH1cIiBkYXRhLXByb2plY3Q9XCIke1xyXG4gICAgICAgICAgICAgICAgICAgIHRhc2sucHJvamVjdElEXHJcbiAgICAgICAgICAgICAgICB9XCI+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJ0YXNrLWRvbmVcIiAke1xyXG4gICAgICAgICAgICAgICAgICAgIHRhc2suZG9uZSA/ICdjaGVja2VkJyA6ICcnXHJcbiAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stdGl0bGVcIj4ke3Rhc2sudGl0bGV9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHVlLWRhdGVcIj4ke3Rhc2suZHVlfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwidGFzay1pbXBvcnRhbmNlXCIgJHtcclxuICAgICAgICAgICAgICAgICAgICB0YXNrLmltcG9ydGFuY2UgPyAnY2hlY2tlZCcgOiAnJ1xyXG4gICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLWRldGFpbHNcIj4ke3Rhc2suZGV0YWlsfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cIm1lbnUtaWNvbiBkZWxldGUtYnV0dG9uXCIgc3JjPVwiLi4vc3JjL2ltYWdlcy9kZWxldGUucG5nXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PmBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmpvaW4oJycpXHJcbiAgICAgICAgdGFza3MuaW5uZXJIVE1MID0gJydcclxuICAgICAgICB0YXNrcy5pbm5lckhUTUwgPSBodG1sXHJcbiAgICAgICAgYWRkRnVuY3Rpb25hbGl0eVRvVGFza3MoKVxyXG4gICAgICAgIGFkZERlbGV0ZUZ1bmN0aW9uYWxpdHlUb1Zpc2libGVUYXNrcygpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IGxvYWRQcm9qZWN0c1Rhc2tzIH1cclxuIiwiaW1wb3J0IHsgbGlzdEFsbFRhc2tzIH0gZnJvbSAnLi9ob21lQnV0dG9uc0Z1bmN0aW9ucydcclxuaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tICcuL3Byb2plY3RMb2FkZXInXHJcbmltcG9ydCB7IHNlbGVjdGVkUHJvamVjdCB9IGZyb20gJy4vc2lkZWJhclByb2plY3RMaXN0RnVuY3Rpb25hbGl0eSdcclxuaW1wb3J0IHsgbG9hZFByb2plY3RzVGFza3MgfSBmcm9tICcuL3Rhc2tMb2FkZXInXHJcblxyXG5mdW5jdGlvbiBhZGREZWxldGVGdW5jdGlvbmFsaXR5VG9WaXNpYmxlVGFza3MoKSB7XHJcbiAgICBjb25zdCBkZWxldGVCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgICAnLnRhc2stY29udGFpbmVyIC5kZWxldGUtYnV0dG9uJ1xyXG4gICAgKVxyXG4gICAgZGVsZXRlQnV0dG9ucy5mb3JFYWNoKChidG4pID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZVRhc2spKVxyXG4gICAgY29uc29sZS5sb2cocHJvamVjdHMpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVRhc2soKSB7XHJcbiAgICBjb25zdCBjb25maXJtYXRpb24gPSBjb25maXJtKFxyXG4gICAgICAgICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiJyArXHJcbiAgICAgICAgICAgIHByb2plY3RzW3RoaXMucGFyZW50Tm9kZS5kYXRhc2V0LnByb2plY3RdLnRhc2tzW1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmRhdGFzZXQuaWRcclxuICAgICAgICAgICAgXS50aXRsZSArXHJcbiAgICAgICAgICAgICdcIiB0YXNrIGZyb20gXCInICtcclxuICAgICAgICAgICAgcHJvamVjdHNbdGhpcy5wYXJlbnROb2RlLmRhdGFzZXQucHJvamVjdF0ucHJvamVjdFRpdGxlICtcclxuICAgICAgICAgICAgJ1wiID8nXHJcbiAgICApXHJcbiAgICBpZiAoY29uZmlybWF0aW9uKSB7XHJcbiAgICAgICAgcHJvamVjdHNbdGhpcy5wYXJlbnROb2RlLmRhdGFzZXQucHJvamVjdF0udGFza3Muc3BsaWNlKFxyXG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuZGF0YXNldC5pZCxcclxuICAgICAgICAgICAgMVxyXG4gICAgICAgIClcclxuICAgICAgICBsZXQgaSA9IDBcclxuICAgICAgICBwcm9qZWN0c1t0aGlzLnBhcmVudE5vZGUuZGF0YXNldC5wcm9qZWN0XS50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XHJcbiAgICAgICAgICAgIHRhc2suaWQgPSBpXHJcbiAgICAgICAgICAgIGkrK1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzX2J5X2JhaGEnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpXHJcbiAgICAgICAgaWYgKHNlbGVjdGVkUHJvamVjdCA9PSAnJykge1xyXG4gICAgICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9qZWN0JylcclxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChwcm9qZWN0KSA9PiBwcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKVxyXG4gICAgICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlYmFyLWl0ZW0nKVxyXG4gICAgICAgICAgICAgICAgLmZvckVhY2goKGJ1dHRvbikgPT4gYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKVxyXG4gICAgICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLWl0ZW0uYWxsLXRhc2tzJylcclxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudC10aXRsZScpLnRleHRDb250ZW50ID0gJ0FsbCBUYXNrcydcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxuICAgICAgICAgICAgbGlzdEFsbFRhc2tzKClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2FkUHJvamVjdHNUYXNrcygpXHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgYWRkRGVsZXRlRnVuY3Rpb25hbGl0eVRvVmlzaWJsZVRhc2tzIH1cclxuIiwiaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tICcuL3Byb2plY3RMb2FkZXInXHJcbmltcG9ydCB7IGNvbXBhcmVBc2MgfSBmcm9tICdkYXRlLWZucydcclxuaW1wb3J0IHsgYWRkRnVuY3Rpb25hbGl0eVRvVGFza3MgfSBmcm9tICcuL3Rhc2tVcGRhdGVyJ1xyXG5pbXBvcnQgeyBhZGREZWxldGVGdW5jdGlvbmFsaXR5VG9WaXNpYmxlVGFza3MgfSBmcm9tICcuL3Rhc2tEZWxldGVyJ1xyXG5pbXBvcnQgeyBzZWxlY3RlZFByb2plY3QgfSBmcm9tICcuL3NpZGViYXJQcm9qZWN0TGlzdEZ1bmN0aW9uYWxpdHknXHJcblxyXG5jb25zdCBtZW51YnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlYmFyLWl0ZW0nKVxyXG5jb25zdCBjb250ZW50VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudC10aXRsZScpXHJcblxyXG5tZW51YnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+XHJcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIHNlbGVjdEJ1dHRvbihlKVxyXG4gICAgICAgIHVwZGF0ZUNvbnRlbnRUaXRsZShlKVxyXG4gICAgfSlcclxuKVxyXG5mdW5jdGlvbiBzZWxlY3RCdXR0b24oZSkge1xyXG4gICAgbWVudWJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpXHJcbiAgICBjb25zdCBzaWRlYmFyUHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdCcpXHJcbiAgICBzaWRlYmFyUHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4gcHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSlcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbn1cclxuZnVuY3Rpb24gdXBkYXRlQ29udGVudFRpdGxlKGUpIHtcclxuICAgIGNvbnRlbnRUaXRsZS50ZXh0Q29udGVudCA9IGUudGFyZ2V0LnRleHRDb250ZW50XHJcbiAgICBjb25zdCBhZGRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJylcclxuICAgIGFkZFRhc2tCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxufVxyXG5cclxuY29uc3QgYWxsVGFza3NCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhci1pdGVtLmFsbC10YXNrcycpXHJcbmFsbFRhc2tzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlzdEFsbFRhc2tzKVxyXG5mdW5jdGlvbiBsaXN0QWxsVGFza3MoKSB7XHJcbiAgICBzZWxlY3RlZFByb2plY3QgPSAnJ1xyXG4gICAgY29uc29sZS5sb2coJ3NlbGVjdGVkIHByb2plY3QgaXMgJyArIHNlbGVjdGVkUHJvamVjdClcclxuICAgIGNvbnN0IGh0bWwgPSBwcm9qZWN0c1xyXG4gICAgICAgIC5tYXAoKHByb2plY3QpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb2plY3QudGFza3NcclxuICAgICAgICAgICAgICAgIC5tYXAoKHRhc2spID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1jb250YWluZXJcIiBkYXRhLWlkPVwiJHt0YXNrLmlkfVwiIGRhdGEtcHJvamVjdD1cIiR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sucHJvamVjdElEXHJcbiAgICAgICAgICAgICAgICAgICAgfVwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwidGFzay1kb25lXCIgJHtcclxuICAgICAgICAgICAgICAgICAgICB0YXNrLmRvbmUgPyAnY2hlY2tlZCcgOiAnJ1xyXG4gICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLXRpdGxlXCI+JHt0YXNrLnRpdGxlfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImR1ZS1kYXRlXCI+JHt0YXNrLmR1ZX08L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cInRhc2staW1wb3J0YW5jZVwiICR7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pbXBvcnRhbmNlID8gJ2NoZWNrZWQnIDogJydcclxuICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1kZXRhaWxzXCI+JHt0YXNrLmRldGFpbH08L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJtZW51LWljb24gZGVsZXRlLWJ1dHRvblwiIHNyYz1cIi4uL3NyYy9pbWFnZXMvZGVsZXRlLnBuZ1wiPlxyXG4gICAgICAgICAgICA8L2Rpdj5gXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJycpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuam9pbignJylcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpLmlubmVySFRNTCA9ICcnXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3MnKS5pbm5lckhUTUwgPSBodG1sXHJcbiAgICBhZGRGdW5jdGlvbmFsaXR5VG9UYXNrcygpXHJcbiAgICBhZGREZWxldGVGdW5jdGlvbmFsaXR5VG9WaXNpYmxlVGFza3MoKVxyXG59XHJcblxyXG5jb25zdCB0b2RheUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLWl0ZW0udG9kYXknKVxyXG50b2RheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxpc3RUb2RheXNUYXNrcylcclxuZnVuY3Rpb24gbGlzdFRvZGF5c1Rhc2tzKCkge1xyXG4gICAgY29uc3QgaHRtbCA9IHByb2plY3RzXHJcbiAgICAgICAgLm1hcCgocHJvamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdC50YXNrc1xyXG4gICAgICAgICAgICAgICAgLm1hcCgodGFzaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZUFzYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGUucGFyc2UodGFzay5kdWUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZS5wYXJzZShuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA9PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1jb250YWluZXJcIiBkYXRhLWlkPVwiJHtcclxuICAgICAgICAgICAgICAgICAgICB0YXNrLmlkXHJcbiAgICAgICAgICAgICAgICB9XCIgZGF0YS1wcm9qZWN0PVwiJHt0YXNrLnByb2plY3RJRH1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJ0YXNrLWRvbmVcIiAke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmRvbmUgPyAnY2hlY2tlZCcgOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stdGl0bGVcIj4ke3Rhc2sudGl0bGV9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImR1ZS1kYXRlXCI+JHt0YXNrLmR1ZX08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJ0YXNrLWltcG9ydGFuY2VcIiAke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmltcG9ydGFuY2UgPyAnY2hlY2tlZCcgOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stZGV0YWlsc1wiPiR7dGFzay5kZXRhaWx9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cIm1lbnUtaWNvbiBkZWxldGUtYnV0dG9uXCIgc3JjPVwiLi4vc3JjL2ltYWdlcy9kZWxldGUucG5nXCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5gXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5qb2luKCcnKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmpvaW4oJycpXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3MnKS5pbm5lckhUTUwgPSAnJ1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJykuaW5uZXJIVE1MID0gaHRtbFxyXG59XHJcblxyXG5jb25zdCBpbXBvcnRhbnRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhci1pdGVtLmltcG9ydGFudCcpXHJcbmltcG9ydGFudEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxpc3RJbXBvcnRhbnRUYXNrcylcclxuZnVuY3Rpb24gbGlzdEltcG9ydGFudFRhc2tzKCkge1xyXG4gICAgY29uc3QgaHRtbCA9IHByb2plY3RzXHJcbiAgICAgICAgLm1hcCgocHJvamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdC50YXNrc1xyXG4gICAgICAgICAgICAgICAgLm1hcCgodGFzaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLmltcG9ydGFuY2UgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stY29udGFpbmVyXCIgZGF0YS1pZD1cIiR7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pZFxyXG4gICAgICAgICAgICAgICAgfVwiIGRhdGEtcHJvamVjdD1cIiR7dGFzay5wcm9qZWN0SUR9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwidGFzay1kb25lXCIgJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5kb25lID8gJ2NoZWNrZWQnIDogJydcclxuICAgICAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLXRpdGxlXCI+JHt0YXNrLnRpdGxlfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkdWUtZGF0ZVwiPiR7dGFzay5kdWV9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwidGFzay1pbXBvcnRhbmNlXCIgJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5pbXBvcnRhbmNlID8gJ2NoZWNrZWQnIDogJydcclxuICAgICAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLWRldGFpbHNcIj4ke3Rhc2suZGV0YWlsfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJtZW51LWljb24gZGVsZXRlLWJ1dHRvblwiIHNyYz1cIi4uL3NyYy9pbWFnZXMvZGVsZXRlLnBuZ1wiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+YFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuam9pbignJylcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5qb2luKCcnKVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJykuaW5uZXJIVE1MID0gJydcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpLmlubmVySFRNTCA9IGh0bWxcclxufVxyXG5cclxuZXhwb3J0IHsgbWVudWJ1dHRvbnMsIGxpc3RBbGxUYXNrcywgbGlzdFRvZGF5c1Rhc2tzIH1cclxuIiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBjb21wYXJlQXNjXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbXBhcmUgdGhlIHR3byBkYXRlcyBhbmQgcmV0dXJuIC0xLCAwIG9yIDEuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb21wYXJlIHRoZSB0d28gZGF0ZXMgYW5kIHJldHVybiAxIGlmIHRoZSBmaXJzdCBkYXRlIGlzIGFmdGVyIHRoZSBzZWNvbmQsXG4gKiAtMSBpZiB0aGUgZmlyc3QgZGF0ZSBpcyBiZWZvcmUgdGhlIHNlY29uZCBvciAwIGlmIGRhdGVzIGFyZSBlcXVhbC5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY29tcGFyZVxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNvbXBhcmVcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSByZXN1bHQgb2YgdGhlIGNvbXBhcmlzb25cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29tcGFyZSAxMSBGZWJydWFyeSAxOTg3IGFuZCAxMCBKdWx5IDE5ODk6XG4gKiBjb25zdCByZXN1bHQgPSBjb21wYXJlQXNjKG5ldyBEYXRlKDE5ODcsIDEsIDExKSwgbmV3IERhdGUoMTk4OSwgNiwgMTApKVxuICogLy89PiAtMVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBTb3J0IHRoZSBhcnJheSBvZiBkYXRlczpcbiAqIGNvbnN0IHJlc3VsdCA9IFtcbiAqICAgbmV3IERhdGUoMTk5NSwgNiwgMiksXG4gKiAgIG5ldyBEYXRlKDE5ODcsIDEsIDExKSxcbiAqICAgbmV3IERhdGUoMTk4OSwgNiwgMTApXG4gKiBdLnNvcnQoY29tcGFyZUFzYylcbiAqIC8vPT4gW1xuICogLy8gICBXZWQgRmViIDExIDE5ODcgMDA6MDA6MDAsXG4gKiAvLyAgIE1vbiBKdWwgMTAgMTk4OSAwMDowMDowMCxcbiAqIC8vICAgU3VuIEp1bCAwMiAxOTk1IDAwOjAwOjAwXG4gKiAvLyBdXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcGFyZUFzYyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0ID0gdG9EYXRlKGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0ID0gdG9EYXRlKGRpcnR5RGF0ZVJpZ2h0KTtcbiAgdmFyIGRpZmYgPSBkYXRlTGVmdC5nZXRUaW1lKCkgLSBkYXRlUmlnaHQuZ2V0VGltZSgpO1xuXG4gIGlmIChkaWZmIDwgMCkge1xuICAgIHJldHVybiAtMTtcbiAgfSBlbHNlIGlmIChkaWZmID4gMCkge1xuICAgIHJldHVybiAxOyAvLyBSZXR1cm4gMCBpZiBkaWZmIGlzIDA7IHJldHVybiBOYU4gaWYgZGlmZiBpcyBOYU5cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZGlmZjtcbiAgfVxufSIsImltcG9ydCB7IG1lbnVidXR0b25zIH0gZnJvbSAnLi9ob21lQnV0dG9uc0Z1bmN0aW9ucydcclxuaW1wb3J0IHsgbG9hZFByb2plY3RzVGFza3MgfSBmcm9tICcuL3Rhc2tMb2FkZXInXHJcblxyXG5sZXQgc2VsZWN0ZWRQcm9qZWN0ID0gJydcclxuZnVuY3Rpb24gc2lkZWJhclByb2plY3RGdW5jdGlvbmFsaXR5KCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QnKS5mb3JFYWNoKChwcm9qZWN0KSA9PlxyXG4gICAgICAgIHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBoaWdobGlnaHRQcm9qZWN0KGUpXHJcbiAgICAgICAgICAgIGRpc3BsYXlQcm9qZWN0VGFza3MoZSlcclxuICAgICAgICAgICAgdXBkYXRlQ29udGVudFRpdGxlKGUpXHJcbiAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkUHJvamVjdChlKVxyXG4gICAgICAgICAgICBsb2FkUHJvamVjdHNUYXNrcygpXHJcbiAgICAgICAgfSlcclxuICAgIClcclxufVxyXG5cclxuZnVuY3Rpb24gaGlnaGxpZ2h0UHJvamVjdChlKSB7XHJcbiAgICBkb2N1bWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdCcpXHJcbiAgICAgICAgLmZvckVhY2goKHByb2plY3QpID0+IHByb2plY3QuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpXHJcbiAgICBtZW51YnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSlcclxuICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG59XHJcbmZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0VGFza3MoKSB7XHJcbiAgICBjb25zdCBhZGRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJylcclxuICAgIGFkZFRhc2tCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxufVxyXG5mdW5jdGlvbiB1cGRhdGVDb250ZW50VGl0bGUoZSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtdGl0bGUnKS50ZXh0Q29udGVudCA9XHJcbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnRleHRDb250ZW50XHJcbn1cclxuZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRQcm9qZWN0KGUpIHtcclxuICAgIHNlbGVjdGVkUHJvamVjdCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmlkXHJcbiAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWQgcHJvamVjdCBpcyAnICsgc2VsZWN0ZWRQcm9qZWN0KVxyXG59XHJcblxyXG5leHBvcnQgeyBzaWRlYmFyUHJvamVjdEZ1bmN0aW9uYWxpdHksIHNlbGVjdGVkUHJvamVjdCB9XHJcbiIsImltcG9ydCB7cHJvamVjdHN9IGZyb20gXCIuL3Byb2plY3RMb2FkZXJcIlxyXG5pbXBvcnQge2xvYWRQcm9qZWN0c30gZnJvbSBcIi4vcHJvamVjdExvYWRlclwiXHJcbmltcG9ydCB7Y2xvc2VQcm9qZWN0Rm9ybX0gZnJvbSBcIi4vcHJvamVjdEZvcm1PcGVuZXJDbG9zZXJcIlxyXG5pbXBvcnQge3NlbGVjdGVkUHJvamVjdH0gZnJvbSBcIi4vc2lkZWJhclByb2plY3RMaXN0RnVuY3Rpb25hbGl0eVwiXHJcblxyXG5sZXQgZm9ybUVkaXQgPSBmYWxzZTtcclxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtXCIpO1xyXG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYWRkVXBkYXRlUHJvamVjdCk7XHJcbmZ1bmN0aW9uIGFkZFVwZGF0ZVByb2plY3QoZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZihmb3JtRWRpdCl7XHJcbiAgICAgICAgcHJvamVjdHNbc2VsZWN0ZWRQcm9qZWN0XS5wcm9qZWN0VGl0bGUgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtLWlucHV0XCIpLnZhbHVlO1xyXG4gICAgICAgIGZvcm1FZGl0ID0gZmFsc2U7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c19ieV9iYWhhXCIsSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcclxuICAgICAgICBsb2FkUHJvamVjdHMoKTtcclxuICAgICAgICBjbG9zZVByb2plY3RGb3JtKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtLWlucHV0XCIpLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBwcm9qZWN0Q3JlYXRvcihwcm9qZWN0VGl0bGUpO1xyXG4gICAgICAgIHByb2plY3RzLnB1c2gobmV3UHJvamVjdCk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c19ieV9iYWhhXCIsSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcclxuICAgICAgICBsb2FkUHJvamVjdHMoKTtcclxuICAgICAgICBjbG9zZVByb2plY3RGb3JtKCk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gcHJvamVjdENyZWF0b3IocHJvamVjdFRpdGxlKXtcclxuICAgIGNvbnNvbGUubG9nKFwiZmFjdG9yeSBjYWxsZWRcIilcclxuICAgIGNvbnN0IGlkID0gcHJvamVjdHMubGVuZ3RoO1xyXG4gICAgY29uc3QgdGFza3MgPSBbXTtcclxuICAgIHJldHVybiB7cHJvamVjdFRpdGxlLCBpZCwgdGFza3N9O1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVJRHMoKXtcclxuICAgIGxldCBpID0gMDtcclxuICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XHJcbiAgICAgICAgcHJvamVjdC5pZCA9IGk7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IHtmb3JtLCBmb3JtRWRpdCwgc2VsZWN0ZWRQcm9qZWN0LCB1cGRhdGVJRHN9IiwiaW1wb3J0IHsgdXBkYXRlSURzIH0gZnJvbSBcIi4vYWRkVXBkYXRlUHJvamVjdFwiO1xyXG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RMb2FkZXJcIjtcclxuaW1wb3J0IHsgbG9hZFByb2plY3RzIH0gZnJvbSBcIi4vcHJvamVjdExvYWRlclwiO1xyXG5pbXBvcnQgeyBzZWxlY3RlZFByb2plY3QgfSBmcm9tIFwiLi9zaWRlYmFyUHJvamVjdExpc3RGdW5jdGlvbmFsaXR5XCI7XHJcbmltcG9ydCB7IG1lbnVidXR0b25zIH0gZnJvbSBcIi4vaG9tZUJ1dHRvbnNGdW5jdGlvbnNcIjtcclxuaW1wb3J0IHsgbGlzdEFsbFRhc2tzIH0gZnJvbSBcIi4vaG9tZUJ1dHRvbnNGdW5jdGlvbnNcIjtcclxuaW1wb3J0IHtsaXN0VG9kYXlzVGFza3N9IGZyb20gXCIuL2hvbWVCdXR0b25zRnVuY3Rpb25zXCJcclxuXHJcbmNvbnN0IGRlbGV0ZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRlbGV0ZS1idXR0b25cIik7XHJcbmRlbGV0ZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVUaGF0UHJvamVjdCkpO1xyXG5mdW5jdGlvbiBkZWxldGVUaGF0UHJvamVjdChlKXtcclxuICAgIGNvbnN0IGRlY2lzaW9uID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgKyBwcm9qZWN0c1tlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5kYXRhc2V0LmlkXS5wcm9qZWN0VGl0bGUgKyBcIiAmIHRhc2tzIGluc2lkZSBpdD9cIik7XHJcbiAgICBpZihkZWNpc2lvbil7XHJcbiAgICAgICAgcHJvamVjdHMuc3BsaWNlKGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLmRhdGFzZXQuaWQsIDEpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNfYnlfYmFoYVwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xyXG4gICAgICAgIHVwZGF0ZUlEcygpO1xyXG4gICAgICAgIGxvYWRQcm9qZWN0cygpO1xyXG4gICAgICAgIHNlbGVjdGVkUHJvamVjdCA9IFwiXCI7XHJcbiAgICAgICAgbGlzdFRvZGF5c1Rhc2tzKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IGRlbGV0ZVRoYXRQcm9qZWN0IH1cclxuIiwiaW1wb3J0IHsgZGVsZXRlVGhhdFByb2plY3QgfSBmcm9tIFwiLi9kZWxldGVQcm9qZWN0XCI7XHJcbmltcG9ydCB7IHNpZGViYXJQcm9qZWN0RnVuY3Rpb25hbGl0eSB9IGZyb20gXCIuL3NpZGViYXJQcm9qZWN0TGlzdEZ1bmN0aW9uYWxpdHlcIjtcclxuaW1wb3J0IHsgc2lkZWJhclByb2plY3RzRWRpdCB9IGZyb20gXCIuL3NpZGViYXJQcm9qZWN0RWRpdHNcIjtcclxuaW1wb3J0IHsgdXBkYXRlSURzIH0gZnJvbSBcIi4vYWRkVXBkYXRlUHJvamVjdFwiO1xyXG5cclxuXHJcbmNvbnN0IHByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RzX2J5X2JhaGFcIikpIHx8IFtdO1xyXG5cclxuZnVuY3Rpb24gbG9hZFByb2plY3RzKCl7XHJcbiAgICBjb25zdCBodG1sID0gcHJvamVjdHMubWFwKHByb2plY3QgPT4ge1xyXG4gICAgICAgIHJldHVybiBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInByb2plY3RcIiBkYXRhLWlkPSR7cHJvamVjdC5pZH0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9qZWN0LXRpdGxlXCI+JHtwcm9qZWN0LnByb2plY3RUaXRsZX08L2Rpdj5cclxuICAgICAgICAgICAgPGltZyBjbGFzcz1cIm1lbnUtaWNvbiBlZGl0LWJ1dHRvblwiIHNyYz1cIi4uL3NyYy9pbWFnZXMvZWRpdC5wbmdcIiBhbHQ9XCJlZGl0XCI+XHJcbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJtZW51LWljb24gZGVsZXRlLWJ1dHRvblwiIHNyYz1cIi4uL3NyYy9pbWFnZXMvZGVsZXRlLnBuZ1wiIGFsdD1cImRlbGV0ZVwiPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICB9KS5qb2luKFwiXCIpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKS5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0IC5kZWxldGUtYnV0dG9uXCIpLmZvckVhY2goZGVsZXRlQnV0dG9uID0+IGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlVGhhdFByb2plY3QpKTtcclxuICAgIHVwZGF0ZUlEcygpO1xyXG4gICAgLy8gY29uc3Qgc2lkZWJhclByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpO1xyXG4gICAgLy8gc2lkZWJhclByb2plY3RDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIC8vIHByb2plY3RzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAvLyAgICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAvLyAgICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcclxuICAgIC8vICAgICBwcm9qZWN0LmRhdGFzZXQuaWQgPSBpdGVtLmlkO1xyXG4gICAgLy8gICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAvLyAgICAgcHJvamVjdFRpdGxlLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRpdGxlXCIpO1xyXG4gICAgLy8gICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IGl0ZW0ucHJvamVjdFRpdGxlO1xyXG4gICAgLy8gICAgIGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgLy8gICAgIGVkaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1lbnUtaWNvblwiKTtcclxuICAgIC8vICAgICBlZGl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJlZGl0LWJ1dHRvblwiKTtcclxuICAgIC8vICAgICBlZGl0QnV0dG9uLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4uL3NyYy9pbWFnZXMvZWRpdC5wbmdcIik7XHJcbiAgICAvLyAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIC8vICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1lbnUtaWNvblwiKTtcclxuICAgIC8vICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImRlbGV0ZS1idXR0b25cIik7XHJcbiAgICAvLyAgICAgZGVsZXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4uL3NyYy9pbWFnZXMvZGVsZXRlLnBuZ1wiKTtcclxuICAgIC8vICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlbGV0ZVRoYXRQcm9qZWN0KTtcclxuICAgIC8vICAgICBwcm9qZWN0LmFwcGVuZENoaWxkKHByb2plY3RUaXRsZSk7XHJcbiAgICAvLyAgICAgcHJvamVjdC5hcHBlbmRDaGlsZChlZGl0QnV0dG9uKTtcclxuICAgIC8vICAgICBwcm9qZWN0LmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XHJcbiAgICAvLyAgICAgc2lkZWJhclByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdCk7XHJcbiAgICAvLyB9KVxyXG4gICAgc2lkZWJhclByb2plY3RGdW5jdGlvbmFsaXR5KCk7XHJcbiAgICBzaWRlYmFyUHJvamVjdHNFZGl0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7bG9hZFByb2plY3RzLCBwcm9qZWN0c30iLCJpbXBvcnQge2Zvcm1FZGl0fSBmcm9tIFwiLi9hZGRVcGRhdGVQcm9qZWN0XCJcclxuaW1wb3J0IHsgb3BlblByb2plY3RGb3JtIH0gZnJvbSBcIi4vcHJvamVjdEZvcm1PcGVuZXJDbG9zZXJcIjtcclxuaW1wb3J0IHtmb3JtfSBmcm9tIFwiLi9hZGRVcGRhdGVQcm9qZWN0XCJcclxuXHJcbmxldCBzZWxlY3RlZFByb2plY3QgPSBcIlwiO1xyXG5mdW5jdGlvbiBzaWRlYmFyUHJvamVjdHNFZGl0KCl7XHJcbiAgICBjb25zdCBlZGl0QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZWRpdC1idXR0b25cIik7XHJcbiAgICBlZGl0QnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHZpZXdQcm9qZWN0RWRpdEZvcm0pKTtcclxuICAgIGZ1bmN0aW9uIHZpZXdQcm9qZWN0RWRpdEZvcm0oZSl7XHJcbiAgICAgICAgb3BlblByb2plY3RGb3JtKCk7XHJcbiAgICAgICAgZm9ybUVkaXQgPSB0cnVlO1xyXG4gICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm0taW5wdXRcIikudmFsdWUgPSBlLnRhcmdldC5wYXJlbnROb2RlLnRleHRDb250ZW50O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge3NpZGViYXJQcm9qZWN0c0VkaXR9IiwiaW1wb3J0IHsgc2VsZWN0ZWRQcm9qZWN0IH0gZnJvbSAnLi9zaWRlYmFyUHJvamVjdExpc3RGdW5jdGlvbmFsaXR5J1xyXG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gJy4vcHJvamVjdExvYWRlcidcclxuaW1wb3J0IHsgbG9hZFByb2plY3RzVGFza3MgfSBmcm9tICcuL3Rhc2tMb2FkZXInXHJcblxyXG5jb25zdCB0YXNrRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWZvcm0nKVxyXG5jb25zdCBhZGRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJylcclxuXHJcbmFkZFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuVGFza0Zvcm0pXHJcbmZ1bmN0aW9uIG9wZW5UYXNrRm9ybSgpIHtcclxuICAgIGNvbnNvbGUubG9nKCduZXcgdGFzayB3aWxsIGJlIGFkZGVkIHRvIHByb2plY3Q6ICcgKyBzZWxlY3RlZFByb2plY3QpXHJcbiAgICBjb25zb2xlLmxvZyhwcm9qZWN0c1tzZWxlY3RlZFByb2plY3RdKVxyXG4gICAgdGFza0Zvcm0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgIGFkZFRhc2tCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxufVxyXG5cclxuY29uc3QgdGFza0Zvcm1DYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1mb3JtLWJ1dHRvbi5jYW5jZWwnKVxyXG50YXNrRm9ybUNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlVGFza0Zvcm0pXHJcbmZ1bmN0aW9uIGNsb3NlVGFza0Zvcm0oKSB7XHJcbiAgICB0YXNrRm9ybS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gICAgYWRkVGFza0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxyXG4gICAgdGFza0Zvcm0ucmVzZXQoKVxyXG59XHJcblxyXG50YXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBjcmVhdGVUYXNrKVxyXG5mdW5jdGlvbiBjcmVhdGVUYXNrKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1mb3JtICN0YXNrLXRpdGxlJykudmFsdWVcclxuICAgIGNvbnN0IGRldGFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWZvcm0gI3Rhc2stZGV0YWlscycpLnZhbHVlXHJcbiAgICBjb25zdCBkdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1mb3JtICN0YXNrLWR1ZS1kYXRlJykudmFsdWVcclxuICAgIGNvbnN0IG5ld1Rhc2sgPSB0YXNrQ29uc3RydWN0b3IodGl0bGUsIGRldGFpbCwgZHVlKVxyXG4gICAgcHJvamVjdHNbc2VsZWN0ZWRQcm9qZWN0XS50YXNrcy5wdXNoKG5ld1Rhc2spXHJcbiAgICBjb25zb2xlLmxvZyhwcm9qZWN0c1tzZWxlY3RlZFByb2plY3RdLnRhc2tzKVxyXG4gICAgY2xvc2VUYXNrRm9ybSgpXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHNfYnlfYmFoYScsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSlcclxuICAgIGxvYWRQcm9qZWN0c1Rhc2tzKClcclxufVxyXG5cclxuZnVuY3Rpb24gdGFza0NvbnN0cnVjdG9yKHRpdGxlLCBkZXRhaWwsIGR1ZSkge1xyXG4gICAgY29uc3QgZG9uZSA9IGZhbHNlXHJcbiAgICBjb25zdCBpbXBvcnRhbmNlID0gZmFsc2VcclxuICAgIGNvbnN0IGlkID0gcHJvamVjdHNbc2VsZWN0ZWRQcm9qZWN0XS50YXNrcy5sZW5ndGhcclxuICAgIGNvbnN0IHByb2plY3RJRCA9IHByb2plY3RzW3NlbGVjdGVkUHJvamVjdF0uaWRcclxuICAgIHJldHVybiB7IGlkLCBkb25lLCB0aXRsZSwgZGV0YWlsLCBkdWUsIGltcG9ydGFuY2UsIHByb2plY3RJRCB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IGFkZFRhc2tCdXR0b24gfVxyXG4iLCJpbXBvcnQgeyBzaWRlYmFyT3BlbmVyIH0gZnJvbSAnLi9zaWRlYmFyT3BlbmVyJ1xuaW1wb3J0IHsgbG9hZFByb2plY3RzIH0gZnJvbSAnLi9wcm9qZWN0TG9hZGVyJ1xuaW1wb3J0IHsgZm9ybUVkaXQsIHNlbGVjdGVkUHJvamVjdCB9IGZyb20gJy4vYWRkVXBkYXRlUHJvamVjdCdcbmltcG9ydCB7IGFkZFRhc2tCdXR0b24gfSBmcm9tICcuL3Rhc2tDcmVhdG9yJ1xuaW1wb3J0IHsgbG9hZFByb2plY3RzVGFza3MgfSBmcm9tICcuL3Rhc2tMb2FkZXInXG5pbXBvcnQgeyBsaXN0QWxsVGFza3MgfSBmcm9tICcuL2hvbWVCdXR0b25zRnVuY3Rpb25zJ1xuaW1wb3J0IHsgdGFza0RlbGV0ZUZ1bmN0aW9uIH0gZnJvbSAnLi90YXNrRGVsZXRlcidcblxubG9hZFByb2plY3RzKClcbmxpc3RBbGxUYXNrcygpXG4iXSwibmFtZXMiOlsic2lkZWJhciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNpZGViYXJPcGVuZXIiLCJtYWluIiwic2lkZWJhclNob3duIiwib3BlblByb2plY3RGb3JtIiwiY2xvc2VQcm9qZWN0Rm9ybSIsInZhbHVlIiwicmVxdWlyZWRBcmdzIiwicmVxdWlyZWQiLCJhcmdzIiwibGVuZ3RoIiwiVHlwZUVycm9yIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsImFkZEZ1bmN0aW9uYWxpdHlUb1Rhc2tzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlVGFzayIsImZhdm9yaXRlVGFzayIsInRoaXMiLCJjaGVja2VkIiwicHJvamVjdHMiLCJwYXJlbnROb2RlIiwiZGF0YXNldCIsInByb2plY3QiLCJ0YXNrcyIsImlkIiwiaW1wb3J0YW5jZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZG9uZSIsInN0eWxlIiwiZGlzcGxheSIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJsb2FkUHJvamVjdHNUYXNrcyIsInNlbGVjdGVkUHJvamVjdCIsImlubmVySFRNTCIsInRleHRDb250ZW50IiwiaHRtbCIsIm1hcCIsInRhc2siLCJwcm9qZWN0SUQiLCJ0aXRsZSIsImR1ZSIsImRldGFpbCIsImpvaW4iLCJhZGREZWxldGVGdW5jdGlvbmFsaXR5VG9WaXNpYmxlVGFza3MiLCJidG4iLCJkZWxldGVUYXNrIiwibG9nIiwiY29uZmlybSIsInByb2plY3RUaXRsZSIsInNwbGljZSIsImkiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJidXR0b24iLCJhZGQiLCJsaXN0QWxsVGFza3MiLCJtZW51YnV0dG9ucyIsImNvbnRlbnRUaXRsZSIsImxpc3RUb2RheXNUYXNrcyIsImRpcnR5RGF0ZUxlZnQiLCJkaXJ0eURhdGVSaWdodCIsImRhdGVMZWZ0IiwiZGF0ZVJpZ2h0IiwiZGlmZiIsImNvbXBhcmVBc2MiLCJwYXJzZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJlIiwidGFyZ2V0Iiwic2VsZWN0QnV0dG9uIiwidXBkYXRlQ29udGVudFRpdGxlIiwiZm9ybUVkaXQiLCJ1cGRhdGVJRHMiLCJkZWxldGVUaGF0UHJvamVjdCIsImN1cnJlbnRUYXJnZXQiLCJsb2FkUHJvamVjdHMiLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Byb2plY3QiLCJwcm9qZWN0Q3JlYXRvciIsInB1c2giLCJnZXRJdGVtIiwiZGVsZXRlQnV0dG9uIiwiaGlnaGxpZ2h0UHJvamVjdCIsInVwZGF0ZVNlbGVjdGVkUHJvamVjdCIsInZpZXdQcm9qZWN0RWRpdEZvcm0iLCJzaWRlYmFyUHJvamVjdHNFZGl0IiwidGFza0Zvcm0iLCJhZGRUYXNrQnV0dG9uIiwiY2xvc2VUYXNrRm9ybSIsInJlc2V0IiwibmV3VGFzayIsInRhc2tDb25zdHJ1Y3RvciJdLCJzb3VyY2VSb290IjoiIn0=